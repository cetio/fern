module fnc.rewritemeinfernwhenthelanguagecompiles;

import fnc.symbols;
import std.string;
import tern.string : indexOf, lastIndexOf;

Glob parse(string text)
{
    Glob glob = new Glob();
    foreach (line; text.splitLines)
    {
        string[] words = lines.split(' ');
        nuint position;
        if (words.length == 0)
            continue;

        foreach (word; words)
        {
            if (word == "module")
            {
                string name = line[(position + word.length)..line.indexOf(';')];
                Module mod = new Module();
                mod.name = name;
                Glob.modules[name] = mod;
            }
            position += word.length;
        }
    }
}